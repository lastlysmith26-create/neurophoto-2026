# NeuroPhoto SaaS - Handover to Claude

## üöÄ –ü—Ä–æ–µ–∫—Ç: NeuroPhoto SaaS
–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –º–æ–¥–µ–ª—è—Ö —Å –ø–æ–º–æ—â—å—é AI (Gemini).
**–°—Ç–µ–∫:** React (Vite), Node.js (Express), Supabase (Auth, DB, Storage), Google Gemini API.

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ (Status: Working)
1.  **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** –ü–µ—Ä–µ—Ö–æ–¥ —Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö `json` —Ñ–∞–π–ª–æ–≤ –Ω–∞ **Supabase**.
    *   Tabl√©: `profiles`, `models`, `generations`.
    *   Storage Bucket: `images`.
2.  **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ Supabase Auth (Email/Pass).
    *   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `AuthContext.jsx`, `Login.jsx`, `AuthRoute.jsx`.
3.  **–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏:**
    *   –†–∞–±–æ—Ç–∞–µ—Ç. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü—É `models` (RLS policies –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã).
4.  **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ç–æ (PhotoSession):**
    *   –†–∞–±–æ—Ç–∞–µ—Ç.
    *   –ë—ç–∫–µ–Ω–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Gemini.
    *   –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Supabase Storage (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ `storage_policy_v2.sql` –ø—Ä–∏–º–µ–Ω–µ–Ω—ã).
    *   –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É `generations`.
    *   –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É (URL –ø–æ—Ñ–∏–∫—Å–µ–Ω, —É–±—Ä–∞–Ω `localhost`).

## ‚ö†Ô∏è –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞ (Current Issue)
**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞—Ü–∏–π (–∫–Ω–æ–ø–∫–∏ "10 –≤–∞—Ä–∏–∞—Ü–∏–π", "–ï—â–µ 5").**

**–î–µ—Ç–∞–ª–∏:**
*   –ú–∞—Ä—à—Ä—É—Ç `POST /variations` –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ `backend/routes/generate.js` (—Å—Ç—Ä–æ–∫–∏ 186+).
*   –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç `/api/generate/variations`.
*   **–ì–∏–ø–æ—Ç–µ–∑–∞:** –ü—Ä–æ—Ü–µ—Å—Å Node.js —Å–µ—Ä–≤–µ—Ä–∞ **–Ω–µ –±—ã–ª —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ (–∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±—ã–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω—ã). –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ.
*   **–ó–∞–¥–∞—á–∞:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –≤–∞—Ä–∏–∞—Ü–∏–π.

## üìã –ó–∞–¥–∞—á–∞ –Ω–∞ —Ä–µ–ª–∏–∑ (Deployment Tasks)
–ü–æ—Å–ª–µ —Ñ–∏–∫—Å–∞ –≤–∞—Ä–∏–∞—Ü–∏–π –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
*   –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ `client.js` (frontend) URL –±—ç–∫–µ–Ω–¥–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ ENV (`VITE_API_URL`).
*   –í `server.js` (backend) –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–¥–æ–º–µ–Ω–∞.

### 2. Frontend (Vercel)
*   **Repo:** Push to GitHub.
*   **Deploy:** Import to Vercel.
*   **Env Vars:**
    *   `VITE_SUPABASE_URL`: `https://iizmjkbdufjxxteklmib.supabase.co`
    *   `VITE_SUPABASE_ANON_KEY`: `...` (—Å–º. `.env`)
    *   `VITE_API_URL`: `https://your-render-backend-url.onrender.com` (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±—ç–∫–∞)

### 3. Backend (Render / Railway)
*   **Repo:** –¢–æ—Ç –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (monorepo –∏–ª–∏ –ø–æ–¥–ø–∞–ø–∫–∞ `backend`).
*   **Env Vars:**
    *   `SUPABASE_URL`: ...
    *   `SUPABASE_KEY`: ... (service_role –∏–ª–∏ anon, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞)
    *   `GEMINI_API_KEY`: ...
    *   `PORT`: 3001 (–∏–ª–∏ default)

## üìÇ –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
*   `backend/routes/generate.js`: –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ (–Ω–æ–≤—ã–π) —ç–Ω–¥–ø–æ–∏–Ω—Ç `/variations`.
*   `backend/services/geminiService.js`: –ü—Ä–æ–º–ø—Ç—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å AI (–¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ Safety).
*   `frontend/src/components/PhotoSession.jsx`: –û—Å–Ω–æ–≤–Ω–æ–π UI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
*   `storage_policy_v2.sql`: SQL —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –º—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –¥–ª—è –ø–æ—á–∏–Ω–∫–∏ –ø—Ä–∞–≤ Storage.
